sci_journal_2
# Rename column to Title
sci_journal_3 <- sci_journal_2 %>%
rename("Title"= "value")
sci_journal_3
# Remove whitespace in Title column
sci_journal_4 <- apply(sci_journal_3,2,function(x)gsub('\\s+', '',x))
sci_journal_4 <- as_tibble(sci_journal_4)
sci_journal_4
# Pull Categories data column from
sci_journal_10 <- sci_journal %>%
pull(Categories)
sci_journal_10 <- as_tibble(sci_journal_10)
sci_journal_10
# Prepare data
sci_journal_11 <- apply(sci_journal_10,2,function(x)gsub(';.*', '',x))
sci_journal_11 <- apply(sci_journal_11,2,function(x)gsub("\\s*\\([^\\)]+\\)","",x))
sci_journal_11 <- as_tibble(sci_journal_11)
# Rename value to Categories
sci_journal_12 <- sci_journal_11 %>%
rename("Categories"= "value")
sci_journal_12
# Bind two tibbles (Title and Categories)
sci_journal_13 <- bind_cols(sci_journal_4,sci_journal_12)
sci_journal_13
# Match data
sci_journal_14 <- sci_journal_13$Categories[match(f1$Title,sci_journal_13$Title)]
sci_journal_14
sci_journal_14 <- as_tibble(sci_journal_14)
sci_journal_14
# Drop missing rows
sci_journal_15 <- sci_journal_14 %>%
drop_na()
sci_journal_15
# Save df as tibble
b1 <- as_tibble(raw_data)
# Delete unnecessary columns
c1 <- b1 %>%
select(-abstract, -keywords,-email)
c1
# Distinct journal column from the rest of the tibble
d1 <- distinct(c1,journal)
d1
# Make all letters in lowercase
d1 <- d1  %>%
mutate(journal = tolower(journal))
d1
# Remove all data in parenthesis
q1 <- apply(d1,2,function(x)gsub("\\s*\\([^\\)]+\\)","",x))
# Remove all data after colon
q1 <- apply(q1,2,function(x)gsub(":.*","",x))
# Remove commas
q1 <- apply(q1,2,function(x)gsub(",","",x))
# Remove euqal sign
q1 <- apply(q1,2,function(x)gsub("=","",x))
# Change &amp; to and
q1 <- apply(q1,2,function(x)gsub("&amp;", "and", x))
# Remove the from text
q1 <- apply(q1,2,function(x)gsub("the", "", x))
# Remove whitespace
q1 <- apply(q1,2,function(x)gsub('\\s+', '',x))
# Save as tibble
q1 <- as_tibble(q1)
# Remove punctuation from journal column and make tibble again
e1 <- q1$journal %>%
removePunctuation()
e1
e1 <- as_tibble(e1)
e1
# Rename value column to Title
f1 <- e1 %>%
rename("Title"= "value")
f1
# Load Scimago journal database
sci_journal <- read.csv("D:/Projekt_COVID/scimagojr_2019.csv",
header = TRUE, sep = ";",stringsAsFactors = FALSE)
sci_journal <- as_tibble(sci_journal)
sci_journal
# Check structure of the data
glimpse(sci_journal)
### Scimago data preparation ###
### Prepare Scimago database for matching (pull Title column)###
sci_journal_1 <- sci_journal %>%
pull(Title)
sci_journal_1
sci_journal_1 <-as_tibble(sci_journal_1)
# Make all the letters in lowercase
sci_journal_1 <- sci_journal_1 %>%
mutate(value =tolower(value))
# Remove all data after colon
sci_journal_1 <- apply(sci_journal_1,2,function(x)gsub(":.*","",x))
# Remove "the" and "and"
sci_journal_1 <- apply(sci_journal_1,2,function(x)gsub("the","",x))
# Remove punctuation from Title column
sci_journal_2 <- sci_journal_1 %>%
removePunctuation()
sci_journal_2 <- as_tibble(sci_journal_2)
sci_journal_2
# Rename column to Title
sci_journal_3 <- sci_journal_2 %>%
rename("Title"= "value")
sci_journal_3
# Remove whitespace in Title column
sci_journal_4 <- apply(sci_journal_3,2,function(x)gsub('\\s+', '',x))
sci_journal_4 <- as_tibble(sci_journal_4)
sci_journal_4
# Pull Categories data column from
sci_journal_10 <- sci_journal %>%
pull(Categories)
sci_journal_10 <- as_tibble(sci_journal_10)
sci_journal_10
# Prepare data
sci_journal_11 <- apply(sci_journal_10,2,function(x)gsub(';.*', '',x))
sci_journal_11 <- apply(sci_journal_11,2,function(x)gsub("\\s*\\([^\\)]+\\)","",x))
sci_journal_11 <- apply(sci_journal_11,2,function(x)gsub("&","",x))
sci_journal_11 <- as_tibble(sci_journal_11)
# Rename value to Categories
sci_journal_12 <- sci_journal_11 %>%
rename("Categories"= "value")
sci_journal_12
# Bind two tibbles (Title and Categories)
sci_journal_13 <- bind_cols(sci_journal_4,sci_journal_12)
sci_journal_13
# Match data
sci_journal_14 <- sci_journal_13$Categories[match(f1$Title,sci_journal_13$Title)]
sci_journal_14
sci_journal_14 <- as_tibble(sci_journal_14)
sci_journal_14
# Drop missing rows
sci_journal_15 <- sci_journal_14 %>%
drop_na()
sci_journal_15
ranking_5 <- as_tibble(ranking_5)
matched_countries <- readRDS("D:/Projekt_COVID/matched_countries.RDS")
View(matched_countries)
# Load data
ranking <- read.csv("D:/Projekt_COVID/scimagojr_country_rank_2019.csv",
header = TRUE, sep = ",",stringsAsFactors = FALSE)
ranking <- as_tibble(ranking)
ranking
ranking_1 <- ranking %>%
pull(Rank)
ranking_1 <- as_tibble(ranking_1)
ranking_2 <- ranking %>%
pull(Country)
ranking_2 <- as_tibble(ranking_2)
ranking_3 <- bind_cols(ranking_1,ranking_2)
# Change countries name and lowercase them
ranking_3 <- ranking_3 %>%
mutate(value1=tolower(value1))
ranking_4 <- apply(ranking_3,2,function(x)gsub("viet nam","vietnam",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("united states","usa",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("united kingdom","uk",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("saudi arabia","saudiarabia",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("south africa","southafrica",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("russian federation","russia",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("new zealand","newzealand",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("south korea","southkorea",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("costa rica","costarica",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("czech republic","czechrepublic",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("north macedonia","macedonia",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("syrian arab republic","syria",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("brunei darussalam","brunei",x))
ranking_4 <- as_tibble(ranking_4)
str(ranking_4)
View(matched_countries)
ranking_px <- matched_countries %>%
slice(1:117,119:122)
ranking_5 <- ranking_4$value[match(ranking_px$Country,ranking_4$value1)]
ranking_5 <- as_tibble(ranking_5)
View(ranking_5)
readyData_for_correlation <- readRDS("D:/Projekt_COVID/readyData_for_correlation.RDS")
View(readyData_for_correlation)
ranking_6 <- bind_cols(readyData_for_correlation,ranking_5)
ranking_6
View(ranking_6)
ranking_6 <- ranking_6 %>%
mutate(value= as.double(value))
ranking_6
ranking_6 <- ranking_6 %>%
rename("Scimago_rank"="value")
ranking_6
source('D:/Projekt_COVID/COVID_Pubmed/scimago_ranking.R', echo=TRUE)
ggplot(ranking_6,aes(x=Scimago_rank,y=Number)) +geom_point()
source('D:/Projekt_COVID/COVID_Pubmed/scimago_ranking.R', echo=TRUE)
ggplot(ranking_6,aes(x=Scimago_rank,y=Number)) +geom_point() + geom_smooth() + scale_y_log10()
# Make plot and analyse correlation
sci_corr <- cor(ranking_6$Number,ranking_6$Scimago_rank ,
method = "spearman")
# Make plot and analyse correlation
sci_corr <- cor(ranking_6$Number,ranking_6$Scimago_rank ,
method = "spearman")
cor_total_cases <- cor(final_data_covid_2$Articles_perMln,final_data_covid_2$Total_cases_perMln ,
method = "spearman")
sci_corr
# Make plot and analyse correlation
sci_corr <- cor(ranking_6$Number,ranking_6$Scimago_rank ,
method = "spearman")
sci_corr
# Make plot and analyse correlation
sci_corr <- cor(ranking_6$Scimago_rank , ranking_6$Number,
method = "spearman")
sci_corr
s <- ggplot(ranking_6,aes(x=Scimago_rank,y=Number)) +geom_point() + geom_smooth() + scale_y_log10()
# Save plot
ggsave(device = "png", filename = "scimago_ranking_600_dpi.RDS",plot =  s,dpi = 600,
path = "D:/Projekt_COVID/Plots")
# Save plot
ggsave(device = "png", filename = "scimago_ranking_600_dpi.RDS",plot =  s,dpi = 600,
path = "D:/Projekt_COVID/Plots")
# Save plot
ggsave(device = "png", filename = "scimago_ranking_600_dpi.RDS",plot =  s,dpi = 600,
path = "D:/Projekt_COVID/Plots")
ranking_6 <- ranking_6 %>%
rename("Number_of_publications"="Number")
s <- ggplot(ranking_6,aes(x=Scimago_rank,y=Number)) +geom_point() + geom_smooth() + scale_y_log10()
s <- ggplot(ranking_6,aes(x=Scimago_rank,y=Number_of_publications)) +geom_point() + geom_smooth() + scale_y_log10()
s
# Save plot
ggsave(device = "png", filename = "scimago_ranking_600_dpi.RDS",plot =  s,dpi = 600,
path = "D:/Projekt_COVID/Plots")
# Save plot
ggsave(device = "png", filename = "scimago_ranking_600_dpi.png",plot =  s,dpi = 600,
path = "D:/Projekt_COVID/Plots")
# Load data
ranking <- read.csv("D:/Projekt_COVID/scimagojr_country_rank_2019.csv",
header = TRUE, sep = ",",stringsAsFactors = FALSE)
ranking <- as_tibble(ranking)
ranking
ranking_1 <- ranking %>%
pull(Rank)
ranking_1 <- as_tibble(ranking_1)
ranking_2 <- ranking %>%
pull(Country)
ranking_2 <- as_tibble(ranking_2)
ranking_3 <- bind_cols(ranking_1,ranking_2)
# Change countries name and lowercase them
ranking_3 <- ranking_3 %>%
mutate(value1=tolower(value1))
ranking_4 <- apply(ranking_3,2,function(x)gsub("viet nam","vietnam",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("united states","usa",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("united kingdom","uk",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("saudi arabia","saudiarabia",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("south africa","southafrica",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("russian federation","russia",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("new zealand","newzealand",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("south korea","southkorea",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("costa rica","costarica",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("czech republic","czechrepublic",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("north macedonia","macedonia",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("syrian arab republic","syria",x))
ranking_4 <- apply(ranking_4,2,function(x)gsub("brunei darussalam","brunei",x))
ranking_4 <- as_tibble(ranking_4)
str(ranking_4)
ranking_px <- matched_countries %>%
slice(1:117,119:122)
ranking_5 <- ranking_4$value[match(ranking_px$Country,ranking_4$value1)]
ranking_5 <- as_tibble(ranking_5)
ranking_6 <- bind_cols(readyData_for_correlation,ranking_5)
ranking_6
ranking_6 <- ranking_6 %>%
mutate(value= as.double(value))
ranking_6
# Rename value and number
ranking_6 <- ranking_6 %>%
rename("Scimago_rank"="value")
ranking_6 <- ranking_6 %>%
rename("Number_of_publications"="Number")
s <- ggplot(ranking_6,aes(x=Scimago_rank,y=Number_of_publications)) +geom_point() + geom_smooth() + scale_y_log10()
s
View(ranking_6)
ranking_7 <- ranking_6 %>%
select(-c(Population,Population_mln,Articles_perMln,HDI_2018,))
ranking_7
View(readyData_for_correlation)
readyData_for_correlation_covid <- readRDS("D:/Projekt_COVID/readyData_for_correlation_covid.RDS")
View(readyData_for_correlation_covid)
ranking_7 <- ranking_7 %>%
slice(1:20)
ranking_7
save(ranking_7, file ='scimago_ranking.RData')
ranking_8 <- as.data.frame(ranking_7)
ranking_8
library(xlsx)
write.xlsx(ranking_8,file = "scimago_ranking")
write.xlsx(ranking_8,file = "scimago_ranking.xlsx")
?write.xlsx()
write.xlsx(ranking_8,file = "D:/Projekt_COVID/Tabels/scimago_ranking.xlsx")
library(stringr)
ranking_9 <- ranking_8 %>%
mutate(Country= str_to_title(Country))
ranking_9
write.xlsx(ranking_9,file = "D:/Projekt_COVID/Tabels/scimago_ranking.xlsx")
write.xlsx(ranking_9,file = "D:/Projekt_COVID/Tabels/scimago_ranking.xlsx")
sci_journal_16 <- sci_journal_16 %>%
arrange(desc(freq))
# COunt categories
sci_journal_16 <- count(sci_journal_15)
sci_journal_16 <- as_tibble(sci_journal_16)
sci_journal_16
# Save df as tibble
b1 <- as_tibble(raw_data)
# Delete unnecessary columns
c1 <- b1 %>%
select(-abstract, -keywords,-email)
c1
# Distinct journal column from the rest of the tibble
d1 <- distinct(c1,journal)
d1
# Make all letters in lowercase
d1 <- d1  %>%
mutate(journal = tolower(journal))
d1
# Remove all data in parenthesis
q1 <- apply(d1,2,function(x)gsub("\\s*\\([^\\)]+\\)","",x))
# Remove all data after colon
q1 <- apply(q1,2,function(x)gsub(":.*","",x))
# Remove commas
q1 <- apply(q1,2,function(x)gsub(",","",x))
# Remove equal sign
q1 <- apply(q1,2,function(x)gsub("=","",x))
# Change &amp; to and
q1 <- apply(q1,2,function(x)gsub("&amp;", "and", x))
# Remove the from text
q1 <- apply(q1,2,function(x)gsub("the", "", x))
# Remove whitespace
q1 <- apply(q1,2,function(x)gsub('\\s+', '',x))
# Save as tibble
q1 <- as_tibble(q1)
# Remove punctuation from journal column and make tibble again
e1 <- q1$journal %>%
removePunctuation()
e1
e1 <- as_tibble(e1)
e1
# Rename value column to Title
f1 <- e1 %>%
rename("Title"= "value")
f1
# Load Scimago journal database
sci_journal <- read.csv("D:/Projekt_COVID/scimagojr_2019.csv",
header = TRUE, sep = ";",stringsAsFactors = FALSE)
sci_journal <- as_tibble(sci_journal)
sci_journal
# Check structure of the data
glimpse(sci_journal)
### Scimago data preparation ###
### Prepare Scimago database for matching (pull Title column)###
sci_journal_1 <- sci_journal %>%
pull(Title)
sci_journal_1
sci_journal_1 <-as_tibble(sci_journal_1)
# Make all the letters in lowercase
sci_journal_1 <- sci_journal_1 %>%
mutate(value =tolower(value))
# Remove all data after colon
sci_journal_1 <- apply(sci_journal_1,2,function(x)gsub(":.*","",x))
# Remove "the"
sci_journal_1 <- apply(sci_journal_1,2,function(x)gsub("the","",x))
# Remove punctuation from Title column
sci_journal_2 <- sci_journal_1 %>%
removePunctuation()
sci_journal_2 <- as_tibble(sci_journal_2)
sci_journal_2
# Rename column to Title
sci_journal_3 <- sci_journal_2 %>%
rename("Title"= "value")
sci_journal_3
# Remove whitespace in Title column
sci_journal_4 <- apply(sci_journal_3,2,function(x)gsub('\\s+', '',x))
sci_journal_4 <- as_tibble(sci_journal_4)
sci_journal_4
# Pull Categories data column from
sci_journal_10 <- sci_journal %>%
pull(Categories)
sci_journal_10 <- as_tibble(sci_journal_10)
sci_journal_10
# Prepare data
sci_journal_11 <- apply(sci_journal_10,2,function(x)gsub(';.*', '',x))
sci_journal_11 <- apply(sci_journal_11,2,function(x)gsub("\\s*\\([^\\)]+\\)","",x))
sci_journal_11 <- as_tibble(sci_journal_11)
# Rename value to Categories
sci_journal_12 <- sci_journal_11 %>%
rename("Categories"= "value")
sci_journal_12
# Bind two tibbles (Title and Categories)
sci_journal_13 <- bind_cols(sci_journal_4,sci_journal_12)
sci_journal_13
View(sci_journal_13)
# Match data
sci_journal_14 <- sci_journal_13$Categories[match(f1$Title,sci_journal_13$Title)]
sci_journal_14
sci_journal_14 <- as_tibble(sci_journal_14)
sci_journal_14
# Drop missing rows
sci_journal_15 <- sci_journal_14 %>%
drop_na()
sci_journal_15
library(plyr)
# COunt categories
sci_journal_16 <- count(sci_journal_15)
sci_journal_16 <- as_tibble(sci_journal_16)
sci_journal_16
sci_journal_16 <- sci_journal_16 %>%
arrange(desc(freq))
print(sci_journal_16, n=124)
#SLice 20 from the top
sci_journal_17 <- sci_journal_16 %>%
slice(1:20)
sci_journal_17
# Remove all data in parenthesis
q1 <- apply(d1,2,function(x)gsub("\\s*\\([^\\)]+\\)","",x))
###sample script - Publications matching####
library(tidyverse)
library(easyPubMed)
library(tm)
# Remove all data in parenthesis
q1 <- apply(d1,2,function(x)gsub("\\s*\\([^\\)]+\\)","",x))
# Remove all data after colon
q1 <- apply(q1,2,function(x)gsub(":.*","",x))
# Remove commas
q1 <- apply(q1,2,function(x)gsub(",","",x))
# Remove equal sign
q1 <- apply(q1,2,function(x)gsub("=","",x))
# Change &amp; to and
q1 <- apply(q1,2,function(x)gsub("&amp;", "and", x))
# Remove the from text
q1 <- apply(q1,2,function(x)gsub("the", "", x))
# Remove whitespace
q1 <- apply(q1,2,function(x)gsub('\\s+', '',x))
q1 <- apply(q1,2,function(x)gsub(' +',' ',x))
# Save as tibble
q1 <- as_tibble(q1)
# Remove punctuation from journal column and make tibble again
e1 <- q1$journal %>%
removePunctuation()
e1
e1 <- as_tibble(e1)
e1
# Rename value column to Title
f1 <- e1 %>%
rename("Title"= "value")
f1
# Match data
sci_journal_14 <- sci_journal_13$Categories[match(f1$Title,sci_journal_13$Title)]
sci_journal_14
sci_journal_14 <- as_tibble(sci_journal_14)
sci_journal_14
# Drop missing rows
sci_journal_15 <- sci_journal_14 %>%
drop_na()
sci_journal_15
View(sci_journal_17)
library(plyr)
# Rename columns
sci_journal_18 <- sci_journal_17 %>%
rename("Categories"= "value")
sci_journal_18 <- sci_journal_18 %>%
rename("Number"= "freq")
# Rename columns
sci_journal_18 <- sci_journal_17 %>%
rename("Categories"= "value")
# Rename columns
sci_journal_18 <- sci_journal_17 %>%
rename("Categories"= "value")
###sample script - Publications matching####
library(tidyverse)
# Rename columns
sci_journal_18 <- sci_journal_17 %>%
rename("Categories"= "value")
sci_journal_18 <- sci_journal_18 %>%
rename("Number"= "freq")
sci_journal_18
# Save as excel file
write.xlsx(sci_journal_18,file = "D:/Projekt_COVID/Tabels/categories_scimago.xlsx")
library(xlsx)
# Save as excel file
write.xlsx(sci_journal_18,file = "D:/Projekt_COVID/Tabels/categories_scimago.xlsx")
View(matched_countries)
View(readyData_for_correlation_covid)
View(readyData_for_correlation)
ranking_9
ranking_9 <- as_tibble(ranking_9)
library(tidyverse)
ranking_9 <- as_tibble(ranking_9)
ranking_9
# Save RDS data
saveRDS(ranking_9,"D:/Projekt_COVID/scimago_ranking_readyData")
saveRDS(sci_journal_18,"D:Projekt_COVID/scimago_categories_readyData")
saveRDS(sci_journal_18,"D:Projekt_COVID/scimago_categories_readyData")
# Save as RDS file
saveRDS(sci_journal_18,"D:/Projekt_COVID/scimago_categories_readyData.RDS")
# Save RDS data
saveRDS(ranking_9,"D:/Projekt_COVID/scimago_ranking_readyData.RDS")
View(readyData_for_correlation)
readyData_for_correlation <- readyData_for_correlation %>%
rename("Number of articles"="Number")
readyData_for_correlation
readyData_for_correlation_covid <- readyData_for_correlation_covid %>%
rename("Number of articles"="Number")
readyData_for_correlation_covid
saveRDS(readyData_for_correlation,"D:/Projekt_COVID/readyData_for_correlation.RDS")
saveRDS(readyData_for_correlation_covid,"D:/Projekt_COVID/readyData_for_correlation_covid")
saveRDS(readyData_for_correlation_covid,"D:/Projekt_COVID/readyData_for_correlation_covid.RDS")
scimago_ranking_readyData <- readRDS("D:/Projekt_COVID/scimago_ranking_readyData.RDS")
View(scimago_ranking_readyData)
scimago_categories_readyData <- readRDS("D:/Projekt_COVID/scimago_categories_readyData.RDS")
View(scimago_categories_readyData)
readyData_for_correlation_covid <- readRDS("D:/Projekt_COVID/readyData_for_correlation_covid.RDS")
View(readyData_for_correlation_covid)
readyData_for_correlation <- readRDS("D:/Projekt_COVID/readyData_for_correlation.RDS")
View(readyData_for_correlation)
